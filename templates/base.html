{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Paperless System{% endblock %}</title>
    
    <link rel="icon" type="image/png" href="{% static 'assets/img/capitol_logo.png' %}">

    <!-- Angle Theme CSS -->
    <link href="{% static 'assets/css/bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/app.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/themes/theme-a.css' %}" rel="stylesheet">
    
    <!-- Font Awesome (keep CDN for latest icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Your custom CSS -->
    <!-- <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/admin_style.css' %}" rel="stylesheet"> -->
    
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .navbar-brand img { width: 40px; margin-right: 10px; }
        /* Remove the sidebar styles here - they're in app.css */
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% block main_container %}
        {% if user.is_authenticated %}
            <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
                <div class="container-fluid">
                    <a class="navbar-brand fw-bold" href="#">
                        <img src="{% static 'assets/img/capitol_logo.png' %}" alt="Logo" style="width: 40px;">
                        EDMS
                    </a>
                    <div class="ms-auto">
                        <span class="text-white me-3 small">Welcome, {{ user.username }}</span>
                        <a href="{% url 'logout' %}" class="btn btn-outline-light btn-sm">Logout</a>
                    </div>
                </div>
            </nav>

            <div class="wrapper">
                <aside class="aside-container">
                    <div class="aside-inner">
                        {% block sidebar %}
                            {% if user.is_superuser %}
                                {% include 'includes/admin_sidebar.html' %}
                            {% elif user.userprofile.role == 'HEAD' %}
                                {% include 'includes/head_sidebar.html' %}
                            {% else %}
                                {% include 'includes/employee_sidebar.html' %}
                            {% endif %}
                        {% endblock %}
                    </div>
                </aside>
                
                <section class="section-container">
                    <div class="content-wrapper">
                        {% block content %}{% endblock %}
                    </div>
                </section>
            </div>
            
        {% else %}
            <div class="container d-flex align-items-center justify-content-center" style="min-height: 80vh;">
                {% block auth_content %}
                    <div class="w-100">
                        {% block content_placeholder %}
                            {% endblock %}
                     </div>
                {% endblock %}
        {% endif %}
    {% endblock main_container %}

    <!-- Essential JavaScript - Order is important! -->
    <script src="{% static 'assets/vendor/jquery/dist/jquery.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap/dist/js/bootstrap.js' %}"></script>
    <script src="{% static 'assets/vendor/jquery-slimscroll/jquery.slimscroll.js' %}"></script>
    <script src="{% static 'assets/vendor/js-storage/js.storage.js' %}"></script>
    
    <!-- Angle Theme Modules -->
    <script src="{% static 'assets/js/modules/common/sidebar.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/toggle-state.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/slimscroll.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/bootstrap-start.js' %}"></script>
    
    <!-- Angle Theme Main -->
    <script src="{% static 'assets/js/app.init.js' %}"></script>
    <script src="{% static 'assets/js/app.js' %}"></script>
    
    <!-- Custom JS -->
    <script src="{% static 'assets/js/custom/custom.js' %}"></script>
    
    <!-- <script>
        // Initialize sidebar
        $(function() {
            // Restore body classes
            var $body = $('body');
            if (typeof StateToggler !== 'undefined') {
                new StateToggler().restoreState($body);
            }
            
            // Enable sidebar toggle
            $('[data-toggle="collapse"]').on('click', function() {
                var target = $(this).data('target');
                $(target).collapse('toggle');
            });
        });
    </script> -->
    
    {% block extra_js %}{% endblock %}
</body>
</html>