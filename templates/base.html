{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Paperless System{% endblock %}</title>
    
    <link rel="icon" type="image/png" href="{% static 'assets/img/capitol_logo.png' %}">
    <link href="{% static 'assets/css/bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/app.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/themes/theme-a.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/datatables.net-bs4/css/dataTables.bootstrap4.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/datatables.net-buttons-bs/css/buttons.bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/datatables.net-keytable-bs/css/keyTable.bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/datatables.net-responsive-bs/css/responsive.bootstrap.css' %}" rel="stylesheet">
    <!-- Icon Libraries -->
    <link rel="stylesheet" href="{% static 'assets/vendor/simple-line-icons/css/simple-line-icons.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f8f9fa; min-height: 100vh; margin: 0; }
        .navbar-brand img { width: 40px; margin-right: 10px; }
        .full-width-container { width: 100%; padding: 0; margin: 0; }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% block main_container %}
        {% if user.is_authenticated %}
            <div class="wrapper">
                <header class="topnavbar-wrapper">
                    <nav class="navbar topnavbar navbar-expand-lg shadow-sm">
                        <div class="container-fluid">
                            <a class="navbar-brand fw-bold" href="#">
                                <img src="{% static 'assets/img/capitol_logo.png' %}" alt="Logo"> ERDMS
                            </a>
                            <div class="ms-auto d-flex align-items-center">
                                <span class="text-white me-4 small d-none d-md-block">Welcome, {{ user.username|title }}</span>
                                <a href="{% url 'logout' %}" class="btn btn-outline-light btn-sm ps-2">
                                    <em class="icon-logout"></em> Logout
                                </a>
                            </div>
                        </div>
                    </nav>
                </header>

                <aside class="aside-container">
                    <div class="aside-inner">
                        {% block sidebar %}
                            {% if user.is_superuser %}
                                {% include 'includes/admin_sidebar.html' %}
                            {% elif user.userprofile.role == 'HEAD' %}
                                {% include 'includes/head_sidebar.html' %}
                            {% else %}
                                {% include 'includes/employee_sidebar.html' %}
                            {% endif %}
                        {% endblock sidebar %}
                    </div>
                </aside>
                
                <section class="section-container">
                    <div class="content-wrapper">
                        {% block content %}{% endblock content %}
                    </div>
                </section>

                <footer class="footer-container text-center p-3">
                    <span>&copy; 2026 - Paperless EDMS</span>
                </footer>
            </div>
            
        {% else %}
            <div style="min-height: 100vh; width: 100vw; overflow-x: hidden;">
                {% block auth_content %}{% endblock auth_content %}
            </div>
        {% endif %}
    {% endblock main_container %}

    <div class="modal-root-container"></div>

    <!-- <script src="{% static 'assets/vendor/jquery/dist/jquery.js' %}"></script>
    <script src="{% static 'assets/vendor/popper.js/dist/umd/popper.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap/dist/js/bootstrap.js' %}"></script>
    <script src="{% static 'assets/vendor/jquery-slimscroll/jquery.slimscroll.js' %}"></script>
    <script src="{% static 'assets/vendor/js-storage/js.storage.js' %}"></script>
    
    <script src="{% static 'assets/js/modules/common/sidebar.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/toggle-state.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/slimscroll.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/bootstrap-start.js' %}"></script>
    
    <script src="{% static 'assets/js/app.init.js' %}"></script>
    <script src="{% static 'assets/js/app.js' %}"></script>
    <script src="{% static 'assets/js/custom/custom.js' %}"></script> -->

    <script src="{% static 'assets/vendor/jquery/dist/jquery.js' %}"></script>
    <script src="{% static 'assets/vendor/popper.js/dist/umd/popper.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap/dist/js/bootstrap.js' %}"></script>
    <script src="{% static 'assets/vendor/jquery-slimscroll/jquery.slimscroll.js' %}"></script>
    <script src="{% static 'assets/vendor/js-storage/js.storage.js' %}"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/parsley.js/2.9.2/parsley.min.js"></script>
    
    <script src="{% static 'assets/js/modules/common/sidebar.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/toggle-state.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/slimscroll.js' %}"></script>
    <script src="{% static 'assets/js/modules/common/bootstrap-start.js' %}"></script>
    
    <script src="{% static 'assets/js/app.init.js' %}"></script>
    <script src="{% static 'assets/js/app.js' %}"></script>

    <!-- DataTables and related plugins -->
    <script src="{% static 'assets/vendor/datatables.net/js/jquery.dataTables.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-bs4/js/dataTables.bootstrap4.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-buttons/js/dataTables.buttons.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-buttons/js/buttons.colVis.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-buttons/js/buttons.flash.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-buttons/js/buttons.html5.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-buttons/js/buttons.print.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-buttons-bs/js/buttons.bootstrap.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-keytable/js/dataTables.keyTable.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-responsive/js/dataTables.responsive.js' %}"></script>
    <script src="{% static 'assets/vendor/datatables.net-responsive-bs/js/responsive.bootstrap.js' %}"></script>

    <script src="{% static 'assets/vendor/jszip/dist/jszip.js' %}"></script>
    <script src="{% static 'assets/vendor/pdfmake/build/pdfmake.js' %}"></script>
    <script src="{% static 'assets/vendor/pdfmake/build/vfs_fonts.js' %}"></script>
    <script src="{% static 'assets/js/custom/custom.js' %}"></script>
    
    <script>
        $(function() {
            $('#user-block-toggle').on('click', function(e) {
                e.preventDefault();
                $('#user-block').collapse('toggle');
            });
            
            $(window).on('resize', function() {
                if ($(window).width() > 992) {
                    $('body').removeClass('aside-toggled');
                }
            });
            
            if ($.fn.slimscroll && $('.sidebar').length) {
                $('.sidebar').slimscroll({
                    height: '100%',
                    size: '3px',
                    color: '#a1a2a3',
                    alwaysVisible: false,
                    distance: '3px',
                    railVisible: true,
                    railColor: '#f5f5f5'
                });
            }
        });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>